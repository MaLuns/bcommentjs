<template>
    <div class="m-comment-item" :class="{ delete: comment.delete }">
        <m-avatar :src="getAvatar(comment)"></m-avatar>
        <div class="comment-user-container">
            <span class="comment-user-top" v-if="comment.top">
                <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="48">
                    <path d="M73.143 311h329.143v402.286H73.143C32.747 713.286 0 680.539 0 640.143v-256C0 343.747 32.747 311 73.143 311z" fill="#ffffff" />
                    <path d="M402.286 311v402.286H73.143C32.747 713.286 0 680.539 0 640.143v-256C0 343.747 32.747 311 73.143 311h329.143zM384 695V329.286H73.143c-29.215 0-53.096 22.837-54.764 51.634l-0.093 3.223v256c0 29.215 22.837 53.095 51.634 54.764l3.223 0.093H384z" fill="#ff5252" />
                    <path d="M950.857 311.5H394.443v401.286h556.414c20.06 0 38.22-8.131 51.366-21.277s21.277-31.306 21.277-51.366v-256c0-20.06-8.13-38.22-21.277-51.366-13.145-13.146-31.306-21.277-51.366-21.277z" fill="#ff5252" />
                    <path d="M701.733 602.182v-12.727h-31.818v-96.768h-63.634c0.878-3.95 1.536-8.119 2.414-12.508h89.088v-12.068H610.45l1.317-12.727h71.095v-41.033H523.995v41.033h71.973l-1.317 12.727h-85.357v12.068h83.602l-2.414 12.508h-53.32v96.768h-31.818v12.727h196.389zM667.94 444.193h-32.695v-18.212h32.695v18.212z m-47.178 0h-34.67v-18.212h34.67v18.212z m-48.932 0h-32.695v-18.212h32.695v18.212z m82.505 73.29H552.521v-13.825h101.815v13.824z m0 23.698H552.521v-13.824h101.815v13.824z m0 23.917H552.521v-13.824h101.815v13.824z m0 24.357H552.521v-14.482h101.815v14.482z m176.64-31.159V468.55h66.487v89.307h15.58V453.848h-44.106c1.317-7.46 2.194-15.14 2.853-23.04h48.493v-15.36h-111.03v15.36h46.518c-0.658 7.9-1.536 15.58-2.852 23.04h-37.303v104.448h15.36z m-74.606 46.08c12.508 0 18.871-6.583 18.871-19.53V430.809h26.332v-15.36H725.21v15.36h33.792v150.09c0 6.143-2.852 9.435-8.118 9.435-7.242 0-14.922-0.44-22.821-0.878l3.51 14.921h24.796z m44.764 1.975c24.356-7.46 41.91-17.554 52.663-30.281 10.971-13.605 16.676-32.256 17.334-55.516v-39.058h-15.579v39.058c-0.658 18.652-5.266 33.792-14.043 45.422-9.216 11.19-25.454 20.187-48.933 26.99l8.558 13.385z m109.495 1.097l11.41-11.63c-10.752-12.288-24.137-24.356-39.936-36.644l-10.752 10.093c16.676 13.605 29.623 26.332 39.278 38.181z" fill="#FFFFFF" />
                    <path d="M199.295 450.63c4.067 0 8.002 1.69 10.832 4.562L279.45 526.3c4.996 5.154 3.67 9.844 2.83 11.619-0.796 1.816-3.493 5.957-10.876 5.957h-28.87c-0.09 0-0.178 0.084-0.178 0.169v50.785c0 8.07-6.897 14.66-15.341 14.66h-55.487c-8.444 0-15.341-6.59-15.341-14.66v-50.743c0-0.084-0.089-0.169-0.177-0.169h-28.87c-7.384 0-10.081-4.183-10.877-5.957-0.796-1.775-2.166-6.507 2.874-11.661l69.325-71.108c2.83-2.915 6.764-4.563 10.832-4.563z m82.798-42.282a1 1 0 0 1 1 1v31.524a1 1 0 0 1-1 1H116.474a1 1 0 0 1-1-1v-31.524a1 1 0 0 1 1-1h165.619z" fill="#ff5252" />
                </svg>
            </span>
            <template v-if="$store.config.is_admin">
                <span class="comment-user-top" v-if="comment.delete">
                    <svg viewBox="0 0 1649 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="48">
                        <path d="M538.590319 487.372328a578.241489 578.241489 0 0 1-28.045949 63.94249c-10.211456 15.246074-25.514419 20.309136-48.952413 12.714543l-197.942965-51.284835c-22.954443-5.063062-30.605925-20.280692-25.485974-43.633353-12.771431-7.623037-22.954443-20.309136-22.954444-20.309136s12.742987-2.559975 30.605925-7.623037l25.485974-91.874663 238.731902 63.999378-7.651481 25.343754 33.165899 10.154568 51.512388-189.295938L266.237412 170.674963 255.997511 201.110223l287.712758 76.657032-28.074393 104.560761-238.703457-63.430494 15.302962-56.347897-33.1659-7.623037-56.603894 209.633518c-10.2399 43.633354 2.559975 69.005551 43.860907 79.160119l213.217483 56.319452c35.697431 10.154568 64.283819 0 79.558337-27.903728 7.679925-15.21763 17.862937-35.526766 30.605925-63.94249a97.59194 97.59194 0 0 1-31.11792-20.821131z m106.608742-55.323906l25.030867 7.111042 41.300932-148.70611 87.209819 23.864657-41.300932 148.70611 29.06994 8.106587 41.329376-148.706109 86.697823 23.864657-41.300931 148.706109 22.954443 6.087052-7.679925 26.908183-22.926-6.087052-43.377356 154.793162c-5.091506 19.285146-17.834493 25.884193-36.692976 20.792687l-22.982888-6.599047 0.511995-26.367744c7.139486 3.043526 14.278972 5.063062 21.418459 7.111042 7.139486 1.991092 12.230992-1.535985 14.790967-11.178558l40.817381-146.203023-35.697431-9.614129-1.535985 5.575057c-20.906463 73.101512-45.396892 129.932959-73.954836 171.034782l-15.302963-24.348208c23.949989-38.058297 45.396892-88.319141 63.74338-151.749636l2.047981-7.623037-29.06994-8.106588-42.865361 154.281167c-5.603501 19.285146-18.346488 26.396188-39.252952 20.821131l-24.490428-6.599047 0.511995-26.396188c8.163476 3.043526 15.302962 5.575057 22.442448 7.594593 9.159022 2.559975 14.790967-0.995546 17.834493-10.638119l40.817381-145.662584-35.69743-10.154567c-21.930453 75.092603-50.004847 132.976485-84.194737 174.590302l-15.786514-24.860203c30.09393-38.598736 55.096353-90.850672 74.466832-156.841141l-25.002424-7.111042 6.115497-26.396188z m86.754712 23.864657l34.133001-123.333912-35.697431-10.154568-34.701884 123.333912 36.23787 10.154568z m115.255768 31.971244l34.18989-123.333912-35.725875-9.642573-34.161446 123.333912 35.697431 9.671018z m9.671017 227.382679l1.564429-27.932173c21.902009 7.111042 37.233416 12.202548 46.932877 14.734079 12.230992 3.555521 20.394468-1.535985 23.94999-14.734079l91.305779-327.335485 27.021959 7.594593-93.325315 333.962976c-7.139486 25.372198-22.470893 34.502776-46.932877 27.903728l-50.488398-14.222084z m88.262253-338.030492l26.026414 7.111042-71.394862 255.286407-26.026413-7.111042 71.394861-255.286407z m167.820591 23.864657l117.332192 32.48324-6.627491 23.324217a1396.210426 1396.210426 0 0 1-71.9353 106.096747c13.254982 42.097368 16.326952 77.652578 10.211456 107.092292-5.11995 17.749161-12.230992 29.439714-22.470893 35.526766-13.738533 7.111042-34.133001 7.111042-60.67141-0.511995l-1.535985-32.48324c8.675471 3.555521 13.766977 5.575057 15.814957 6.087052 13.254982 3.043526 22.442448 3.043526 27.533955 0.511995 5.603501-2.559975 9.699461-8.135032 11.747441-17.26561 7.651481-27.903729 4.067516-61.922954-11.235446-102.512781a1247.845646 1247.845646 0 0 0 71.394861-106.096746l-58.139879-16.213176-92.81332 332.938985-29.098383-8.135032 100.493245-360.842714z m123.447688 295.392684c-27.02196 31.971245-54.584358 57.343442-83.654297 77.652578l-19.370479-23.864657c29.06994-19.285146 56.091899-43.633354 81.065879-73.101511l21.958897 19.31359z m-42.836916 110.647813l1.50754-30.463704c17.862937 6.087052 30.605925 10.154568 38.769401 12.686099 7.679925 2.019536 12.230992-1.535985 15.302963-11.178558l32.141909-115.19888-96.425729-26.908183 8.191921-28.927719 96.425729 26.908183 13.738533-48.724859-54.584358-15.21763 7.679925-27.420178 135.166686 37.546302-7.679925 27.420177-50.488399-13.710089-13.766977 48.72486 92.329769 25.372198-8.163476 28.927719-92.329769-25.372198-34.161446 122.309922c-6.115496 22.869111-19.910918 30.975699-40.817381 25.400642l-42.836916-12.202548z m175.472071-346.165523c12.742987 49.236855 40.276942 94.434637 81.606318 136.532005l-24.461984 20.309136a316.782698 316.782698 0 0 1-79.586782-132.46449c-43.377356 35.526766-89.798238 60.386968-139.774641 74.609053l-9.671017-29.951709c54.043919-15.729625 102.000786-41.613818 142.789723-77.140583l29.098383 8.106588z m-17.862937 251.247335c12.742987 39.594282 21.418458 74.097057 26.026414 102.512781l-29.581935 10.154568c-4.09596-29.439714-12.230992-64.454484-23.466439-105.072757l27.02196-7.594592z" fill="#ff5252" />
                        <path d="M428.795831 720.301619L61.951398 622.51057c-17.94827-5.11995-30.77659-25.599751-25.65664-44.060016l20.536689-74.751273c-12.82832 2.559975-25.656639 2.559975-38.96851 2.559975l-15.416739 61.951398c-10.2399 38.911622 12.799876 77.339693 49.265299 87.579592l304.750815 82.459643c20.508245-2.559975 51.313279-7.679925 72.333519-17.919826z m95.430183 25.599751c-15.388295 5.11995-30.77659 10.2399-44.116904 7.679926-10.2399-2.559975-17.94827-12.799876-20.536689-25.599751l-25.65664-7.679926-23.06822 30.719702 366.844434 97.847937c12.799876-7.679925 28.216615-17.919826 44.08846-25.599751l-297.525996-77.368137zM61.951398 485.779455L175.358295 62.75779c5.11995-17.919826 25.628195-30.719701 44.08846-25.599751L1386.710074 349.019896c-7.679925-12.799876-7.679925-30.719701-7.679926-38.911622L273.832004 16.649794c7.679925 10.2399 17.94827 20.479801 28.216615 28.159726-20.536689-7.679925-59.505199-20.479801-80.041889-44.031572-35.924984-5.11995-72.333519 15.359851-80.041888 51.739941L28.102838 475.51111c10.78034 5.11995 21.048684 7.679925 33.84856 10.239901zM1464.163543 983.040398c-7.679925 5.11995-17.976714 7.679925-28.216615 5.11995l-444.297902-118.811289c-41.585373-7.679925-105.726972-15.359851-172.940541-10.2399l609.530074 162.330866c5.11995 2.559975 12.799876 2.559975 17.94827 2.559975 2.559975-9.727905 10.268345-25.087756 17.976714-40.959602z m87.721814-275.538654s10.2399 7.679925 25.656639 15.35985l69.773544-265.270309c10.2399-38.911622-12.799876-77.311248-49.265299-87.579593l-209.320631-56.831448c23.096664 12.799876 69.773544 35.839652 121.598817 41.471597-12.799876 5.11995-35.924984 10.2399-56.945224 12.799875l134.427138 35.839652c17.94827 5.11995 30.77659 25.628195 25.656639 44.08846l-131.867162 492.112549c5.11995 20.479801 7.679925 46.619991 2.559975 69.659767 10.2399-10.2399 20.536689-23.039776 25.656639-38.911621l56.945224-211.510833c-17.436275-12.799876-14.8763-51.199502-14.876299-51.199502z" fill="#ff5252" p-id="24166" />
                        <path d="M176.964092 391.415172l56.709631-32.741212 31.95708 55.348356-56.709632 32.741213-31.957079-55.348357zM602.476881 353.712247l32.747301 56.709632-55.348357 31.957079-32.74243-56.723025 55.343486-31.943686z m351.038402-62.924252l32.74243 56.703544-55.362967 31.957079-32.742431-56.703543 55.362968-31.95708zM1296.954655 834.416323a46.468414 46.468414 0 0 1-35.852176 38.578379 46.45015 46.45015 0 0 1-48.846383-19.676386 46.462326 46.462326 0 0 1 0.893717-52.656247 46.478155 46.478155 0 0 1 49.489275-18.002188c23.681065 4.945883 38.976533 28.01815 34.315567 51.756442z m121.821907-374.75356l-52.76096 36.748329h105.521921l-52.760961-36.748329z m-730.634349 56.047258l-54.335315-69.630782-33.888191 70.776542 88.223506-1.14576z m0 0" fill="#ff5252" />
                    </svg>
                </span>
                <span class="comment-user-top" v-else-if="!comment.isAudit">
                    <svg viewBox="0 0 1701 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="48">
                        <path d="M216.800249 368.510935c40.194131-21.102193 81.252756-52.763396 123.175876-94.990916l21.930159 20.399639c-16.526459 15.6437-32.704685 30.063715-48.539548 43.262478l-55.963244 198.887343-27.471448-7.73053 45.502858-161.710421c-18.362597 13.280342-36.383049 24.876747-54.060137 34.79043-0.983819-10.551705-2.510687-21.522264-4.574516-32.908023z m32.992038-114.437175c42.055838-17.417741 81.166307-43.568095 117.336275-78.452281L388.90774 197.957099c-44.000342 37.422878-87.802216 66.206897-131.417798 86.347186-1.989555-9.780966-4.556252-19.860243-7.697655-30.230525z m85.349973 130.740813l163.359049 45.966764 9.791924-34.795301 29.301498 8.244356-9.791924 34.795301 57.139444 16.078383-7.215486 25.640181-57.138226-16.078383-24.118183 85.709165c-8.106768 28.812024-27.423962 38.925394-57.946712 30.336457-14.164319-3.985199-33.29522-9.502136-57.401227-16.547158 1.006954-9.202606 1.939634-20.00879 2.795606-32.416114 20.764918 7.686697 39.569503 13.901317 56.418625 18.642644 15.13718 4.260376 25.044775-1.914064 29.716699-18.516014l21.232476-75.453337-163.359049-45.967981 7.215486-25.638963z m11.222602 61.262231l25.881265-10.504219c12.22225 23.992771 22.675329 46.30282 31.367762 66.932585l-28.491795 11.35045c-8.386816-22.647325-17.972966-45.242293-28.757232-67.778816z m8.245574-133.258806l109.516861 30.817407 14.840086-52.742696-93.398297-26.283073 7.110773-25.273684 93.400732 26.281855 14.429755-51.277926 29.301498 8.244357-14.429755 51.277926 94.132509 26.487629-7.110773 25.273684-94.133726-26.487629-14.840086 52.742697 108.783867 30.610416-7.215486 25.64018-247.602226-69.67218 7.214268-25.638963zM700.850284 398.782859l120.504466 33.908889 11.131282-39.557327 28.569722 8.0398-11.131282 39.557327 120.870963 34.011168-50.502316 179.475177-27.104951-7.627034 4.844822-17.21562-93.766011-26.385351-22.468338 79.847648-28.569722-8.0398 22.468338-79.847648-93.400733-26.280637-4.844822 17.215619-27.103734-7.627034 50.502316-179.475177z m-11.058226-85.724995l160.061793 45.038954c-3.373964-11.884975-7.468747-24.499291-12.277041-37.844166l29.499966-7.904647c6.435006 15.515853 11.825313 30.075891 16.167268 43.681332l-20.203605 5.77872 161.89306 45.553998-19.272142 68.493545-28.569722-8.0398 11.8521-42.121588-278.003215-78.227025-11.8521 42.122806-28.569722-8.0398 19.27336-68.492329z m-0.281265 229.971406l93.399515 26.281855 12.16137-43.22108-93.400733-26.281855-12.160152 43.22108z m19.169865-68.127049l93.399514 26.281855 12.057874-42.854583-93.399514-26.280637-12.057874 42.853365z m102.799372 102.448704l93.767229 26.384133 12.160152-43.219862-93.766011-26.385351-12.16137 43.22108z m124.994968-84.597498l-93.76723-26.385351-12.057874 42.854583 93.76723 26.384133 12.057874-42.853365zM1029.62734 614.227101c37.806421-34.158497 68.556861-73.203215 92.250102-117.131719l-52.377417-14.737808 7.215486-25.64018 52.742697 14.841303 20.51044-72.889075 27.471448 7.73053-20.51044 72.889075 41.755092 11.748604-7.214269 25.638963-41.756309-11.748604-18.138559 64.464514 14.754854-8.892119c11.91785 17.583334 22.734992 34.856181 32.455077 51.822193l-23.935543 13.424019c-8.325936-16.307291-17.011063-31.795139-26.056599-46.464761l-52.976476 188.265018-27.471448-7.729313 54.625103-194.126535c-23.721246 36.542554-47.287857 64.561922-70.693745 84.065408-0.221603-11.391848-1.103144-23.235424-2.649494-35.529513z m96.635891 142.612395c93.404385-11.663372 178.288019-49.703572 254.653336-114.124252l20.16586 23.857617c-29.520666 24.372661-60.134735 45.136361-91.843425 62.303277 21.622107 30.856371 41.672295 60.739881 60.150564 89.656618l-29.04215 17.521237c-16.564205-29.167562-35.400447-60.556024-56.511163-94.166602-46.010597 22.099405-94.332195 36.962625-144.964794 44.58966-2.783429-7.898559-6.98536-17.77815-12.608228-29.637555z m9.315843-75.24878c55.668585-11.47708 104.830326-29.793408 147.484004-54.947767a14263.72703 14263.72703 0 0 0-68.620176-11.797308c-9.310973-1.563396-18.216485-2.225769-26.715319-1.983467l-6.028329-30.551972c11.522131-2.554521 21.122892-6.705313 28.799848-12.451158 20.673598-14.471153 41.738045-31.734259 63.190906-51.786882l-69.590601-19.581413 7.420042-26.371957 112.446402 31.640504c-5.820119-17.711182-11.354102-33.631277-16.603167-47.756633l28.033978-8.31863c6.04781 14.08761 12.842007 31.153465 20.37894 51.191477l-23.01991 7.356728 112.079905 31.537008-7.420043 26.371957-129.660804-36.485327c-25.453888 22.089665-51.068499 42.4199-76.847486 60.989489a11512.362007 11512.362007 0 0 0 83.018273 18.222573 375.677717 375.677717 0 0 0 52.191125-45.001208l22.717946 21.8084c-62.369027 61.504533-141.924452 103.549413-238.665056 126.132204a952.774164 952.774164 0 0 0-14.590478-28.216618z" fill="#1296db" />
                        <path d="M437.63358 702.302059l-356.165707-95.509612c-18.34068-5.474321-29.289322-24.237508-25.022859-42.895981l20.018531-72.775838a185.102916 185.102916 0 0 1-37.606735 2.572785l-14.298255 60.195614c-10.225389 36.799467 10.972994 74.996737 47.615391 85.78831L368.146474 719.890264a235.422592 235.422592 0 0 0 69.487106-17.588205z m92.795586 24.8804a90.182621 90.182621 0 0 1-42.89111 7.433436 30.310887 30.310887 0 0 1-20.019748-25.022858l-24.879182-7.290978-22.592533 30.168429 356.026902 95.224694c12.580224-7.433436 27.595643-17.43844 42.893545-25.017988l-288.537874-75.494735z m-448.960076-253.650036l110.382573-410.930834c5.469451-18.339463 24.232637-29.283234 42.891111-25.021641l1133.1321 303.409617a77.497684 77.497684 0 0 1-7.433436-37.607953L287.076358 17.422611a143.002026 143.002026 0 0 0 27.595643 27.163396c-20.01853-7.434654-57.194235-20.014878-77.64136-42.892328-35.310345-6.287677-69.407962 16.023591-77.778949 50.901688l-110.382573 411.214535a126.314844 126.314844 0 0 0 32.599971 9.722521zM1443.085908 957.812585a34.153627 34.153627 0 0 1-27.453184 5.003111l-431.376742-115.243225a660.416685 660.416685 0 0 0-168.005403-10.007439l592.08995 157.849417a41.718564 41.718564 0 0 0 17.583334 2.572785 248.670059 248.670059 0 0 1 17.445746-40.175867h-0.283701z m85.359715-268.233208a189.067415 189.067415 0 0 0 25.017988 14.297037l67.776381-258.22577c10.050055-36.822602-11.162939-74.929769-47.75785-85.788309l-203.034483-55.191286a317.795539 317.795539 0 0 0 117.817227 40.175867 262.39726 262.39726 0 0 1-55.191287 12.585094l130.402321 35.030297c18.349203 5.469451 29.341679 24.204633 25.165318 42.894763L1459.95573 914.344333a153.680361 153.680361 0 0 1 2.572785 67.77151 99.186759 99.186759 0 0 0 25.736371-36.747111l55.191286-205.607267c-17.588205-12.580224-14.297037-50.183306-14.297036-50.183306h-0.713513z m0 0" fill="#1296db" />
                        <path d="M176.964092 391.415172l56.709631-32.741212 31.95708 55.348356-56.709632 32.741213-31.957079-55.348357zM602.476881 353.712247l32.747301 56.709632-55.348357 31.957079-32.74243-56.723025 55.343486-31.943686z m351.038402-62.924252l32.74243 56.703544-55.362967 31.957079-32.742431-56.703543 55.362968-31.95708zM1296.954655 834.416323a46.468414 46.468414 0 0 1-35.852176 38.578379 46.45015 46.45015 0 0 1-48.846383-19.676386 46.462326 46.462326 0 0 1 0.893717-52.656247 46.478155 46.478155 0 0 1 49.489275-18.002188c23.681065 4.945883 38.976533 28.01815 34.315567 51.756442z m121.821907-374.75356l-52.76096 36.748329h105.521921l-52.760961-36.748329z m-730.634349 56.047258l-54.335315-69.630782-33.888191 70.776542 88.223506-1.14576z m0 0" fill="#1296db" />
                    </svg>
                </span>
            </template>
            <div class="comment-user-info">
                <template v-if="comment.nick">
                    <a v-if="comment.link" class="comment-user-nick link" rel="nofollow" :href="comment.link" target="_blank" v-text="comment.nick"></a>
                    <span v-else class="comment-user-nick" v-text="comment.nick"></span>
                </template>
                <span class="comment-user-tag" v-if="comment.tag">{{ comment.tag }}</span>
                <span class="comment-user-sys">{{ comment.ua.browser }} {{ comment.ua.version }}</span>
                <span class="comment-user-sys">{{ comment.ua.os }} {{ comment.ua.osVersion }}</span>
            </div>
            <div class="comment-user-text">
                <template v-if="comment.at">
                    <a v-if="comment.at.link" class="comment-replylink link" rel="nofollow" :href="comment.at.link" target="_blank">@{{ comment.at.nick || comment.at.tag }}</a>
                    <span v-else class="comment-replylink">@{{ comment.at.nick || comment.at.tag }}</span>
                </template>
                <div v-html="formatContent(comment.content)"></div>
            </div>
            <div class="comment-user-meta">
                <span class="comment-time">{{ timeAgo(new Date(comment.created)) }}</span>
                <div>
                    <span v-if="!comment.delete && comment.isAudit" class="comment-reply" @click="handleEmits('reply', comment)">回复</span>
                    <template v-if="$store.config.is_admin">
                        <span v-if="!comment.delete && !comment.isAudit" class="comment-reply" @click="handleEmits('audit', comment)">审核</span>
                        <span v-if="!comment.delete" class="comment-reply c-danger" @click="handleEmits('delete', comment)">删除</span>
                    </template>
                </div>
            </div>
            <div class="comment-edit-container" v-if="app.replyComment && app.replyComment.id === comment.id">
                <m-editor isCancel @sumbit="app.sumbit" @cancel="handleEmits('reply', null)"></m-editor>
            </div>
            <div class="comment-reply-container" v-if="comment.childer && comment.childer.length > 0">
                <template v-if="comment.childer.length < 3">
                    <m-comment-item v-for="element in comment.childer" :key="element.id" :comment="element"></m-comment-item>
                </template>
                <template v-else>
                    <m-comment-item v-for="idx in len" :key="comment.childer[idx - 1].id" :comment="comment.childer[idx - 1]"></m-comment-item>
                    <span class="toggle-btn link" @click="handleToggle(comment.childer.length)">{{ len === 2 ? '显示更多' : '折叠评论' }}</span>
                </template>
            </div>
        </div>
    </div>
</template>

<script>
import mAvatar from '+/avatar'
import mEditor from '+/editor'
import { timeAgo } from "@/timeago.js";
import { parse } from "@/emojis";

export default {
    name: "m-comment-item",
    //emits: ['sumbit', 'reply', 'audit', 'delete'],
    components: {
        mAvatar,
        mEditor
    },
    props: {
        comment: Object,
        replyComment: Object
    },
    data () {
        return {
            len: 2
        }
    },
    inject: ['app'],
    methods: {
        timeAgo,
        // 格式化内容
        formatContent (html = '') {
            return parse(html)
        },
        // 头像显示
        getAvatar (comment) {
            if (this.$store.config && this.$store.config.is_use_qq_avatar) {
                return comment.qqAvatar || comment.gavatar
            }
            return comment.gavatar
        },
        // 事件
        handleEmits (emit, ...data) {
            console.log(emit, data);
            //this.$emit(emit, ...data)
            this.app[emit](...data)
        },
        // 显示更多
        handleToggle (len) {
            this.len = this.len === 2 ? len : 2
        }
    }
}
</script>